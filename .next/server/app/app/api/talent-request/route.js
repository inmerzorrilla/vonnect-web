"use strict";(()=>{var e={};e.id=95,e.ids=[95],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7255:(e,n,a)=>{a.r(n),a.d(n,{originalPathname:()=>b,patchFetch:()=>M,requestAsyncStorage:()=>E,routeModule:()=>y,serverHooks:()=>R,staticGenerationAsyncStorage:()=>x});var t={};a.r(t),a.d(t,{GET:()=>d,POST:()=>m,dynamic:()=>u});var r=a(5468),o=a(2197),i=a(4694),s=a(5685),l=a(4053),c=a(1098);!function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}();let u="force-dynamic",p=l.Ry({companyName:l.Z_().min(2,"Company name is required"),companyEmail:l.Z_().email("Invalid email address"),companyPhone:l.Z_().optional(),companyWebsite:l.Z_().url().optional().or(l.i0("")),companyIndustry:l.Z_().optional(),companySize:l.Km(["STARTUP","SMALL","MEDIUM","LARGE","ENTERPRISE"]).optional(),companyLocation:l.Z_().optional(),companyDescription:l.Z_().optional(),jobTitle:l.Z_().min(2,"Job title is required"),jobDescription:l.Z_().min(50,"Job description must be at least 50 characters"),seniority:l.Km(["INTERN","JUNIOR","MID","SENIOR","LEAD","PRINCIPAL","DIRECTOR","VP","C_LEVEL"]),employmentType:l.Km(["FULL_TIME","PART_TIME","CONTRACT","FREELANCE","INTERNSHIP","TEMPORARY"]),workMode:l.Km(["REMOTE","HYBRID","ON_SITE"]),skills:l.IX(l.Z_()).min(1,"At least one skill is required"),languages:l.IX(l.Z_()).min(1,"At least one language is required"),minExperience:l.Rx().min(0).max(50),maxExperience:l.Rx().min(0).max(50).optional(),salaryMin:l.Rx().min(0).optional(),salaryMax:l.Rx().min(0).optional(),currency:l.Z_().default("USD"),urgency:l.Km(["LOW","MEDIUM","HIGH","URGENT"]),location:l.Z_().optional(),comments:l.Z_().optional()});async function m(e){try{let n=await e.json(),a=p.parse(n),t=await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).company.findFirst({where:{email:a.companyEmail}});t||(t=await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).company.create({data:{name:a.companyName,email:a.companyEmail,phone:a.companyPhone||null,website:a.companyWebsite||null,industry:a.companyIndustry||null,size:a.companySize||null,location:a.companyLocation||null,description:a.companyDescription||null}}));let r=await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).talentRequest.create({data:{companyId:t.id,jobTitle:a.jobTitle,jobDescription:a.jobDescription,seniority:a.seniority,employmentType:a.employmentType,workMode:a.workMode,skills:a.skills,languages:a.languages,minExperience:a.minExperience,maxExperience:a.maxExperience||null,salaryMin:a.salaryMin||null,salaryMax:a.salaryMax||null,currency:a.currency,urgency:a.urgency,location:a.location||null,comments:a.comments||null,status:"PENDING"}});return s.NextResponse.json({success:!0,message:"Talent request submitted successfully",id:r.id})}catch(e){if(console.error("Talent request submission error:",e),e instanceof c.jm)return s.NextResponse.json({success:!1,message:"Validation error",errors:e.errors},{status:400});return s.NextResponse.json({success:!1,message:"Internal server error. Please try again later."},{status:500})}}async function d(){try{let e=await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).talentRequest.findMany({include:{company:{select:{name:!0,email:!0}}},orderBy:{createdAt:"desc"},take:10});return s.NextResponse.json({success:!0,requests:e.map(e=>({...e,salaryMin:e.salaryMin?Number(e.salaryMin):null,salaryMax:e.salaryMax?Number(e.salaryMax):null}))})}catch(e){return console.error("Error fetching talent requests:",e),s.NextResponse.json({success:!1,message:"Error fetching talent requests"},{status:500})}}let y=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/app/api/talent-request/route",pathname:"/app/api/talent-request",filename:"route",bundlePath:"app/app/api/talent-request/route"},resolvedPagePath:"C:\\Users\\pc\\Desktop\\BrainTask - Vonnect\\Vonnect_Web\\vonnect_redesign\\app\\app\\api\\talent-request\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:E,staticGenerationAsyncStorage:x,serverHooks:R}=y,b="/app/api/talent-request/route";function M(){return(0,i.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:x})}}};var n=require("../../../../webpack-runtime.js");n.C(e);var a=e=>n(n.s=e),t=n.X(0,[343,769,208],()=>a(7255));module.exports=t})();