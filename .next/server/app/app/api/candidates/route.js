"use strict";(()=>{var e={};e.id=113,e.ids=[113],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2888:(e,a,t)=>{t.r(a),t.d(a,{originalPathname:()=>O,patchFetch:()=>g,requestAsyncStorage:()=>f,routeModule:()=>y,serverHooks:()=>x,staticGenerationAsyncStorage:()=>N});var r={};t.r(r),t.d(r,{GET:()=>m,POST:()=>p,dynamic:()=>u});var n=t(5468),i=t(2197),s=t(4694),o=t(5685),l=t(4053),c=t(1098);!function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}();let u="force-dynamic",d=l.Ry({firstName:l.Z_().min(2,"First name must be at least 2 characters"),lastName:l.Z_().min(2,"Last name must be at least 2 characters"),email:l.Z_().email("Invalid email address"),phone:l.Z_().optional(),country:l.Z_().min(2,"Country is required"),city:l.Z_().optional(),linkedinUrl:l.Z_().url().optional().or(l.i0("")),githubUrl:l.Z_().url().optional().or(l.i0("")),portfolioUrl:l.Z_().url().optional().or(l.i0("")),specialization:l.Z_().min(2,"Specialization is required"),yearsExperience:l.Rx().min(0).max(50),skills:l.IX(l.Z_()).min(1,"At least one skill is required"),languages:l.IX(l.Z_()).min(1,"At least one language is required"),openToRemote:l.O7(),currentStatus:l.Km(["ACTIVELY_LOOKING","OPEN_TO_OPPORTUNITIES","NOT_LOOKING","EMPLOYED","FREELANCING","UNEMPLOYED"]),expectedSalary:l.Rx().min(0).optional(),currency:l.Z_().default("USD"),bio:l.Z_().optional()});async function p(e){try{let a=await e.json(),t=d.parse(a);if(await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).candidate.findUnique({where:{email:t.email}}))return o.NextResponse.json({success:!1,message:"A candidate with this email already exists"},{status:409});let r=await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).candidate.create({data:{firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone||null,country:t.country,city:t.city||null,linkedinUrl:t.linkedinUrl||null,githubUrl:t.githubUrl||null,portfolioUrl:t.portfolioUrl||null,specialization:t.specialization,yearsExperience:t.yearsExperience,skills:t.skills,languages:t.languages,openToRemote:t.openToRemote,currentStatus:t.currentStatus,expectedSalary:t.expectedSalary||null,currency:t.currency,bio:t.bio||null}});return o.NextResponse.json({success:!0,message:"Candidate profile created successfully",id:r.id})}catch(e){if(console.error("Candidate profile creation error:",e),e instanceof c.jm)return o.NextResponse.json({success:!1,message:"Validation error",errors:e.errors},{status:400});return o.NextResponse.json({success:!1,message:"Internal server error. Please try again later."},{status:500})}}async function m(){try{let e=await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).candidate.findMany({orderBy:{createdAt:"desc"},take:10,select:{id:!0,firstName:!0,lastName:!0,email:!0,country:!0,specialization:!0,yearsExperience:!0,skills:!0,languages:!0,openToRemote:!0,currentStatus:!0,expectedSalary:!0,currency:!0,createdAt:!0}});return o.NextResponse.json({success:!0,candidates:e.map(e=>({...e,expectedSalary:e.expectedSalary?Number(e.expectedSalary):null}))})}catch(e){return console.error("Error fetching candidates:",e),o.NextResponse.json({success:!1,message:"Error fetching candidates"},{status:500})}}let y=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/app/api/candidates/route",pathname:"/app/api/candidates",filename:"route",bundlePath:"app/app/api/candidates/route"},resolvedPagePath:"C:\\Users\\pc\\Desktop\\BrainTask - Vonnect\\Vonnect_Web\\vonnect_redesign\\app\\app\\api\\candidates\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:f,staticGenerationAsyncStorage:N,serverHooks:x}=y,O="/app/api/candidates/route";function g(){return(0,s.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:N})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[343,769,208],()=>t(2888));module.exports=r})();