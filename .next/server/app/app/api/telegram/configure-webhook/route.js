"use strict";(()=>{var e={};e.id=181,e.ids=[181],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2806:(e,o,r)=>{r.r(o),r.d(o,{originalPathname:()=>m,patchFetch:()=>w,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>k,staticGenerationAsyncStorage:()=>f});var t={};r.r(t),r.d(t,{DELETE:()=>d,GET:()=>l,POST:()=>c});var s=r(5468),n=r(2197),a=r(4694),i=r(5685);let u=process.env.TELEGRAM_BOT_TOKEN,p=`https://api.telegram.org/bot${u}`;async function c(e){try{let{webhookUrl:o}=await e.json();if(!o)return i.NextResponse.json({error:"Missing webhookUrl parameter"},{status:400});console.log("Setting webhook URL:",o);let r=await fetch(`${p}/setWebhook`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:o,allowed_updates:["message"],drop_pending_updates:!0})}),t=await r.json();if(console.log("Webhook setup response:",t),t.ok)return i.NextResponse.json({success:!0,message:"Webhook configured successfully!",webhookUrl:o,result:t});return i.NextResponse.json({success:!1,error:"Failed to configure webhook",details:t},{status:400})}catch(e){return console.error("Error configuring webhook:",e),i.NextResponse.json({error:"Failed to configure webhook",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function l(){try{let e=await fetch(`${p}/getWebhookInfo`),o=await e.json();return i.NextResponse.json({success:!0,webhookInfo:o,isConfigured:o.ok&&""!==o.result.url,currentUrl:o.result?.url||"Not set"})}catch(e){return console.error("Error getting webhook info:",e),i.NextResponse.json({error:"Failed to get webhook info",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function d(){try{let e=await fetch(`${p}/deleteWebhook`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({drop_pending_updates:!0})}),o=await e.json();if(o.ok)return i.NextResponse.json({success:!0,message:"Webhook removed successfully!",result:o});return i.NextResponse.json({success:!1,error:"Failed to remove webhook",details:o},{status:400})}catch(e){return console.error("Error removing webhook:",e),i.NextResponse.json({error:"Failed to remove webhook",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/app/api/telegram/configure-webhook/route",pathname:"/app/api/telegram/configure-webhook",filename:"route",bundlePath:"app/app/api/telegram/configure-webhook/route"},resolvedPagePath:"C:\\Users\\pc\\Desktop\\BrainTask - Vonnect\\Vonnect_Web\\vonnect_redesign\\app\\app\\api\\telegram\\configure-webhook\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:k}=g,m="/app/api/telegram/configure-webhook/route";function w(){return(0,a.patchFetch)({serverHooks:k,staticGenerationAsyncStorage:f})}}};var o=require("../../../../../webpack-runtime.js");o.C(e);var r=e=>o(o.s=e),t=o.X(0,[343,769],()=>r(2806));module.exports=t})();