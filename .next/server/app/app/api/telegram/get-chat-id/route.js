"use strict";(()=>{var e={};e.id=38,e.ids=[38],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2160:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>f,patchFetch:()=>x,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var a={};s.r(a),s.d(a,{GET:()=>u,POST:()=>m});var r=s(5468),o=s(2197),n=s(4694),i=s(5685);let d=process.env.TELEGRAM_BOT_TOKEN,c=`https://api.telegram.org/bot${d}`;async function u(e){try{let e=await fetch(`${c}/getUpdates?limit=100`),t=await e.json();if(!t.ok)return i.NextResponse.json({error:"Failed to get updates from Telegram",details:t},{status:500});if(0===t.result.length)return i.NextResponse.json({error:"No messages found. Please send a message to your bot @inmerzorrillabot first.",instructions:"Go to Telegram and send any message to @inmerzorrillabot, then try again."},{status:400});let s=t.result.filter(e=>e.message&&e.message.from&&!1===e.message.from.is_bot).map(e=>({chatId:e.message.from.id,firstName:e.message.from.first_name,lastName:e.message.from.last_name,username:e.message.from.username,messageText:e.message.text?.substring(0,50)+"...",date:new Date(1e3*e.message.date).toISOString(),isBot:e.message.from.is_bot||!1})).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).filter((e,t,s)=>t===s.findIndex(t=>t.chatId===e.chatId));return i.NextResponse.json({success:!0,totalUpdates:t.result.length,uniqueChats:s,mostRecentChatId:s[0]?.chatId,instructions:"Use the mostRecentChatId if it corresponds to your personal account."})}catch(e){return console.error("Error getting chat ID:",e),i.NextResponse.json({error:"Failed to get chat ID",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function m(e){try{let{setChatId:t}=await e.json();if(!t)return i.NextResponse.json({error:"Missing setChatId parameter"},{status:400});let s=`âœ… *Chat ID Configurado Correctamente*

Tu Chat ID ${t} ha sido configurado para recibir mensajes del chat widget de vonnect.net

ðŸŽ‰ \xa1El sistema ya est\xe1 listo para funcionar!`,a=await fetch(`${c}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:t,text:s,parse_mode:"Markdown"})}),r=await a.json();if(!r.ok)return i.NextResponse.json({error:"Failed to send test message. Invalid chat ID.",details:r},{status:400});return i.NextResponse.json({success:!0,message:"Chat ID configured successfully!",chatId:t,testMessageId:r.result.message_id})}catch(e){return console.error("Error setting chat ID:",e),i.NextResponse.json({error:"Failed to set chat ID",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/app/api/telegram/get-chat-id/route",pathname:"/app/api/telegram/get-chat-id",filename:"route",bundlePath:"app/app/api/telegram/get-chat-id/route"},resolvedPagePath:"C:\\Users\\pc\\Desktop\\BrainTask - Vonnect\\Vonnect_Web\\vonnect_redesign\\app\\app\\api\\telegram\\get-chat-id\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:l,serverHooks:h}=p,f="/app/api/telegram/get-chat-id/route";function x(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[343,769],()=>s(2160));module.exports=a})();